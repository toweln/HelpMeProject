<!DOCTYPE HTML>
<html>
	<head>
		<title>Help Me</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
		<link rel="icon" type="image/x-icon" href="favicon.ico">
		<link rel="stylesheet" href="css/style.css" />
	</head>
	<body style='background: black url(http://wallpapercave.com/wp/FyXmsXt.png) no-repeat fixed center center'>
	<div id='login-background'></div>
	<div id='login-border'></div>
	<div id='login-container'>
		<center><img src='images/logo.png' id='helpme' style='margin-top: -150px'></center>
		<div id='login' style='margin-left: -100px'>
		<form method="post" action="/home.html" style='margin-top: 50px'>
			<center><div id='error' style='font-size: 24px; padding: 10px;'><b></b></div></center>
			<input type='text' name='username' placeholder='Username' accept-charset="UTF-8" id='login-form'>
			<input type='text' name='first_name' placeholder='First Name' accept-charset="UTF-8" id='login-form'>
			<input type='text' name='last_name' placeholder='Last Name' accept-charset="UTF-8" id='login-form'>
			<input type='text' name='email' placeholder='Email' accept-charset="UTF-8" id='login-form'>
			<input type='text' name='phone' placeholder='Phone Number' accept-charset="UTF-8" id='login-form'>
			<input type='password' name='password' placeholder='Password' accept-charset="UTF-8" id='login-form' id='password1'>
			<input type='password' name='password' placeholder='Confirm Password' accept-charset="UTF-8" id='login-form' autocomplete='false' id='password2'>
			<div id="tabs-container">
			<center><p style='color: white; font-size: 24px; width: 500px; margin-top: 30px'>What areas do you have experience in?</p></center>
		    <ul class="tabs-menu">
		        <li class="current"><a href="#tab-1">Math</a></li>
		        <li><a href="#tab-2">Science</a></li>
		        <li><a href="#tab-3">Humanities</a></li>
		        <li><a href="#tab-4">CS</a></li>
		        <li><a href="#tab-5">History</a></li>
		        <li><a href="#tab-6">Languages</a></li>
		    </ul>
		    <div class="tab">
		        <div id="tab-1" class="tab-content">
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Algebra'>Algebra<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Calculus'>Calculus<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Differential Equations'>Differential Equations<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Discrete Math'>Discrete Math<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Geometry'>Geometry<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Linear Algebra'>Linear Algebra<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Probability'>Probability<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Multivariable Calculus'>Multivariable Calculus<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Number Theory'>Number Theory<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Set Theory'>Set Theory<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Statistics'>Statistics<br>
		        </div>
		        <div id="tab-2" class="tab-content">
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Biochemistry'>Biochemistry<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Biology'>Biology<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Chemistry'>Chemistry<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Geology'>Geology<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Inorganic Chemistry'>Inorganic Chemistry<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Materials Science'>Materials Science<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Microbiology'>Microbiology<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Nutrition'>Nutrition<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Organic Chemistry'>Organic Chemistry<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Physics'>Physics<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Physiology'>Physiology<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Plant Biology'>Plant Biology<br>
		        </div>
		        <div id="tab-3" class="tab-content">
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Art'>Art<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Art History'>Art History<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Communication'>Communication<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Dance'>Dance<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Education'>Education<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='English'>English<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Ethnic Studies'>Ethnic Studies<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Film and Theater'>Film/Theater<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Gender Studies'>Gender Studies<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Graphic Design'>Graphic Design<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Linguistics'>Linguistics<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Music'>Music<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Music Theory'>Music Theory<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Philosophy'>Philosophy<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Religious Studies'>Religious Studies<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Writing'>Writing<br>
		        </div>
		        <div id="tab-4" class="tab-content">
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Arduino'>Arduino<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Artificial Intelligence'>Artificial Intelligence<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='C'>C<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='C++'>C++<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='C#'>C#<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='CSS'>CSS<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Computer Graphics'>Computer Graphics<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='HTML'>HTML<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Java'>Java<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Javascript'>Javascript<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='jQuery'>jQuery<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Lisp'>Lisp<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Machine Learning'>Machine Learning<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='MATLAB'>MATLAB<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Perl'>Perl<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='PHP'>PHP<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Python'>Python<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='R'>R<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Ruby'>Ruby<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='SAS'>SAS<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Scala'>Scala<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='SQL'>SQL<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Stata'>Stata<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Visual Basic'>Visual Basic<br>
		        </div>
		        <div id="tab-5" class="tab-content">
		            <input type='checkbox' name='topics' class='tag-checkbox' value='African History'>African History<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='East Asian History'>East Asian History<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='European History'>European History<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Social History'>Social History<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='US History'>US History<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='World History'>World History<br>
		        </div>
		        <div id="tab-6" class="tab-content">
		            <input type='checkbox' name='topics' class='tag-checkbox' value='American Sign Language'>American Sign Language<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Arabic'>Arabic<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Cantonese'>Cantonese<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Dutch'>Dutch<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='French'>French<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='German'>German<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Hebrew'>Hebrew<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Hindi'>Hindi<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Italian'>Italian<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Japanese'>Japanese<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Korean'>Korean<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Latin'>Latin<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Mandarin'>Mandarin<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Portugese'>Portugese<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Russian'>Russian<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Spanish'>Spanish<br>
		            <input type='checkbox' name='topics' class='tag-checkbox' value='Swahili'>Swahili<br>
		        </div>
		    </div>
		</div>
			<center style='margin-top: 20px; margin-left: 100px'><a href="#" id='login-submit' class="button" style='height: 20px; padding-top: 7px; margin-top: -5px; margin-bottom: 50px;'>Sign up</a></center>
		</form>
		</div>
	</div>
	<script>
	$(document).ready(function() {
	    $(".tabs-menu a").click(function(event) {
	        event.preventDefault();
	        $(this).parent().addClass("current");
	        $(this).parent().siblings().removeClass("current");
	        var tab = $(this).attr("href");
	        $(".tab-content").not(tab).css("display", "none");
	        $(tab).fadeIn();
	    });
	});
	$("#login-submit").click(function() {
		$("b").html("");
		if (/^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i.test($("input[name='email']").val())) {
			if (valid_phone($("input[name='phone']").val())) {
				if ($("#password1").val() == $("password2").val()) {
					var favorite = [];
		            $.each($("input[name='topics']:checked"), function(){            
		                favorite.push($(this).val());
		            });
		            console.log(favorite);
					addUser(favorite);
				} else {
					console.log("bad pw");
					$("b").html("ERROR: Passwords don't match");
				}
			} else {
				console.log("bad phone");
				console.log($("input[name='phone']").val());
				$("b").html("ERROR: Not a valid phone number");
			}
		} else {
			console.log("bad email");
			$("b").html("ERROR: Not a valid email address");
		}
	});
	function valid_phone(phone_num) {
	  var regexp = /^[(]{0,1}[0-9]{3}[)]{0,1}[-\s\.]{0,1}[0-9]{3}[-\s\.]{0,1}[0-9]{4}$/;
	  var digits = phone_num.replace(/\D/g, "");
	  return (digits.match(regexp) !== null);
	}
	function addUser(favorite) {
		var username = $("input[name='username']").val();
		var first_name = $("input[name='first_name']").val();
		var last_name = $("input[name='last_name']").val();
		var email = $("input[name='email']").val();
		var phone_number = $("input[name='phone']").val();
		var password = $("input[name='password']").val();
		var topics = favorite;
		var usernameJSON = JSON.stringify(username);
		var first_nameJSON = JSON.stringify(first_name);
		var last_nameJSON = JSON.stringify(last_name);
		var email_JSON = JSON.stringify(email);
		var phone_numberJSON = JSON.stringify(phone_number);
		var passwordJSON = JSON.stringify(password);
		var topicsJSON = JSON.stringify(topics);
		var userInput = {username: usernameJSON, first_name: first_nameJSON, last_name: last_nameJSON, email: email_JSON, phone_number: phone_numberJSON, password: passwordJSON, topics: topicsJSON};
		$.post("/newUser", userInput, function(response) {
			login_valid = JSON.parse(response);
			console.log(login_valid);
			if (login_valid != "") {
				document.cookie= 'helpme_username=' + login_valid;
				window.location.href = "/home.html";
			} else {
				$("b").html("ERROR: User already exists");
			}
		});
	}
	</script>
	</body>
</html>